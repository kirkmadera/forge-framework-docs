<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Domain Modeling and Data Persistence | Forge Framework Documentation</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="kirkmadera">
        <meta name="description" content="Forge Framework Documentation">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../domain-modeling-and-data-persistence/querying-data.html" />
        
        
        <link rel="prev" href="../composite-view/README.html" />
        

        <meta property="og:title" content="Domain Modeling and Data Persistence | Forge Framework Documentation">
        <meta property="og:site_name" content="Forge Framework Documentation">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/kirkmadera">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../gitbook/style.css">
        


        
    <div class="book" data-github="kirkmadera/forge-framework-docs" data-level="5" data-basepath=".." data-revision="1399270357009">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/kirkmadera/forge-framework-docs" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/kirkmadera/forge-framework-docs/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/kirkmadera/forge-framework-docs/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >Forge Framework Documentation</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/kirkmadera" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/kirkmadera/forge-framework-docs/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/kirkmadera/forge-framework-docs/edit/master/domain-modeling-and-data-persistence/README.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="about/README.html">
                
                <a href="../about/README.html">
                    <i class="fa fa-check"></i> <b>1.</b> About Forge Framework
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="about/differentiators.html">
                            
                            <a href="../about/differentiators.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Differentiators from Other Frameworks
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="about/status.html">
                            
                            <a href="../about/status.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Status
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="installation/README.html">
                
                <a href="../installation/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> Installation
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="installation/hardware-requirements.html">
                            
                            <a href="../installation/hardware-requirements.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Hardware Requirements
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="installation/software-requirements.html">
                            
                            <a href="../installation/software-requirements.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Software Requirements
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="installation/server-configuration.html">
                            
                            <a href="../installation/server-configuration.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Server Configuration
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="quick-start/README.html">
                
                <a href="../quick-start/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Quick Start
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="quick-start/application-flow.html">
                            
                            <a href="../quick-start/application-flow.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Application Flow Walk Through
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="quick-start/application-configuration.html">
                            
                            <a href="../quick-start/application-configuration.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Application Configuration
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="quick-start/module-example.html">
                            
                            <a href="../quick-start/module-example.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> A Basic Module Example
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="composite-view/README.html">
                
                <a href="../composite-view/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Composite View
                </a>
                
                
            </li>
        
            <li  data-level="5" data-path="domain-modeling-and-data-persistence/README.html">
                
                <a href="../domain-modeling-and-data-persistence/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> Domain Modeling and Data Persistence
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="domain-modeling-and-data-persistence/querying-data.html">
                            
                            <a href="../domain-modeling-and-data-persistence/querying-data.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Querying Data
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="domain-modeling-and-data-persistence/saving-data.html">
                            
                            <a href="../domain-modeling-and-data-persistence/saving-data.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> Saving Data
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="design-hierarchy/README.html">
                
                <a href="../design-hierarchy/README.html">
                    <i class="fa fa-check"></i> <b>6.</b> Design Hierarchy
                </a>
                
                
            </li>
        
            <li  data-level="7" data-path="view-configuration/README.html">
                
                <a href="../view-configuration/README.html">
                    <i class="fa fa-check"></i> <b>7.</b> View Configuration
                </a>
                
                
            </li>
        
            <li  data-level="8" data-path="user-authentication-and-access-control/README.html">
                
                <a href="../user-authentication-and-access-control/README.html">
                    <i class="fa fa-check"></i> <b>8.</b> User Authentication and Access Control
                </a>
                
                
            </li>
        
            <li  data-level="9" data-path="error-and-exception-handling/README.html">
                
                <a href="../error-and-exception-handling/README.html">
                    <i class="fa fa-check"></i> <b>9.</b> Error and Exception Handling
                </a>
                
                
            </li>
        
            <li  data-level="10" data-path="css-and-js-merging-and-minifcation/README.html">
                
                <a href="../css-and-js-merging-and-minifcation/README.html">
                    <i class="fa fa-check"></i> <b>10.</b> CSS and JS Merging and Minification
                </a>
                
                
            </li>
        
            <li  data-level="11" data-path="task-manager/README.html">
                
                <a href="../task-manager/README.html">
                    <i class="fa fa-check"></i> <b>11.</b> Task Manager
                </a>
                
                
            </li>
        
            <li  data-level="12" data-path="shell-scripts/README.html">
                
                <a href="../shell-scripts/README.html">
                    <i class="fa fa-check"></i> <b>12.</b> Running Shell Scripts
                </a>
                
                
            </li>
        
            <li  data-level="13" data-path="caching-strategies/README.html">
                
                <a href="../caching-strategies/README.html">
                    <i class="fa fa-check"></i> <b>13.</b> Caching Strategies
                </a>
                
                
            </li>
        
            <li  data-level="14" data-path="zf2-breaks/README.html">
                
                <a href="../zf2-breaks/README.html">
                    <i class="fa fa-check"></i> <b>14.</b> Breaks from Zend Framework 2
                </a>
                
                
            </li>
        
            <li  data-level="15" data-path="resources/README.html">
                
                <a href="../resources/README.html">
                    <i class="fa fa-check"></i> <b>15.</b> Resources
                </a>
                
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 76%;min-width: 72%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../about/README.html" title="About Forge Framework" class="chapter done new-chapter" data-progress="1" style="left: 4%;"></a>
    
        <a href="../about/differentiators.html" title="Differentiators from Other Frameworks" class="chapter done " data-progress="1.1" style="left: 8%;"></a>
    
        <a href="../about/status.html" title="Status" class="chapter done " data-progress="1.2" style="left: 12%;"></a>
    
        <a href="../css-and-js-merging-and-minifcation/README.html" title="CSS and JS Merging and Minification" class="chapter done " data-progress="10" style="left: 16%;"></a>
    
        <a href="../task-manager/README.html" title="Task Manager" class="chapter done " data-progress="11" style="left: 20%;"></a>
    
        <a href="../shell-scripts/README.html" title="Running Shell Scripts" class="chapter done " data-progress="12" style="left: 24%;"></a>
    
        <a href="../caching-strategies/README.html" title="Caching Strategies" class="chapter done " data-progress="13" style="left: 28%;"></a>
    
        <a href="../zf2-breaks/README.html" title="Breaks from Zend Framework 2" class="chapter done " data-progress="14" style="left: 32%;"></a>
    
        <a href="../resources/README.html" title="Resources" class="chapter done " data-progress="15" style="left: 36%;"></a>
    
        <a href="../installation/README.html" title="Installation" class="chapter done new-chapter" data-progress="2" style="left: 40%;"></a>
    
        <a href="../installation/hardware-requirements.html" title="Hardware Requirements" class="chapter done " data-progress="2.1" style="left: 44%;"></a>
    
        <a href="../installation/software-requirements.html" title="Software Requirements" class="chapter done " data-progress="2.2" style="left: 48%;"></a>
    
        <a href="../installation/server-configuration.html" title="Server Configuration" class="chapter done " data-progress="2.3" style="left: 52%;"></a>
    
        <a href="../quick-start/README.html" title="Quick Start" class="chapter done new-chapter" data-progress="3" style="left: 56%;"></a>
    
        <a href="../quick-start/application-flow.html" title="Application Flow Walk Through" class="chapter done " data-progress="3.1" style="left: 60%;"></a>
    
        <a href="../quick-start/application-configuration.html" title="Application Configuration" class="chapter done " data-progress="3.2" style="left: 64%;"></a>
    
        <a href="../quick-start/module-example.html" title="A Basic Module Example" class="chapter done " data-progress="3.3" style="left: 68%;"></a>
    
        <a href="../composite-view/README.html" title="Composite View" class="chapter done new-chapter" data-progress="4" style="left: 72%;"></a>
    
        <a href="../domain-modeling-and-data-persistence/README.html" title="Domain Modeling and Data Persistence" class="chapter done new-chapter" data-progress="5" style="left: 76%;"></a>
    
        <a href="../domain-modeling-and-data-persistence/querying-data.html" title="Querying Data" class="chapter  " data-progress="5.1" style="left: 80%;"></a>
    
        <a href="../domain-modeling-and-data-persistence/saving-data.html" title="Saving Data" class="chapter  " data-progress="5.2" style="left: 84%;"></a>
    
        <a href="../design-hierarchy/README.html" title="Design Hierarchy" class="chapter  new-chapter" data-progress="6" style="left: 88%;"></a>
    
        <a href="../view-configuration/README.html" title="View Configuration" class="chapter  new-chapter" data-progress="7" style="left: 92%;"></a>
    
        <a href="../user-authentication-and-access-control/README.html" title="User Authentication and Access Control" class="chapter  new-chapter" data-progress="8" style="left: 96%;"></a>
    
        <a href="../error-and-exception-handling/README.html" title="Error and Exception Handling" class="chapter  new-chapter" data-progress="9" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_1">
                    
                        <h1 id="domain-modeling-and-data-persistence">Domain Modeling and Data Persistence</h1>
<p>Domain models in Forge Framework are true domain models focused on business data, business
logic, and nothing more. Data modeling is complicated enough without the included complexity
of data persistence. Forge Framework implements the
<a href="http://martinfowler.com/eaaCatalog/dataMapper.html" target="_blank">Data Mapper</a> pattern; the task of data
persistence is offloaded to a class dedicated to this purpose.</p>
<p>To abstract the data storage even further, the
<a href="http://martinfowler.com/eaaCatalog/repository.html" target="_blank">Repository Pattern</a> is also utilized via
the <em>Criteria</em> class. This class allows all data to be queried in direct terms of domain data
and relationships with no knowledge of the underlying data storage structure.</p>
<p>Both of these patterns make it easier to substitute data storage mechanisms. Forge Framework
intends to the best storage mechanism for each specific task.</p>
<p>Other existing ORM systems like <a href="http://www.doctrine-project.org/projects/orm.html" target="_blank">Doctrine</a>
were also considered but, in the end, were not a good fit.</p>
<h2 id="terms">Terms</h2>
<p>The following PHP class types are used in Forge Framework:</p>
<ol>
<li><strong>Entity</strong> - An entity is a domain model with business data and logic. <em>(Note: We may want
to rename this at some point as domain models may not represent anything tangeable. For
example, you might write a Tax model to store tax calculation logic, but there is no real
tax &quot;entity&quot;)</em></li>
<li><strong>Mapper</strong> - A mapper class retreives or stores entities from persistent storage.</li>
<li><strong>Criteria</strong> - The Criteria class is a communication layer between entities and mappers
that allow data to be queried in terms of entities.</li>
</ol>
<h2 id="entity">Entity</h2>
<p>An entity is a domain object with business properties and logic. It has no awareness of the
persistence layer or mapper classes.</p>
<p>All entities clearly define the properties they work with. The getProvidedData() method on all
entities returns an array of all data keys relevant directly to this entity, not including
related entities&#39; data. The getProvidedData() method is also used help facilitate the
getArrayCopy() and populate() methods to implement the ArraySerializeable interface. This
allows entities to be used directly with forms using ZF2&#39;s bind() functionality. The populate
method is also used by the database mapper to create the entity populated with all data
returned from the persistence layer. Entities also can store additional data in an arbitrary
data array. The populate() method uses the ClassMethods hydrator to populate all recognized
data points from getProvidedData(), then adds to the generic data array for unrecognized
properties.</p>
<p>All entities also provide a general input filter which can be used for validation. This is done
by implementing the InputFilterAwareInterface interface.</p>
<p>Internally, entities store an $isNew flag, to help mappers determine whether the entity is new
or exists already in storage.</p>
<h2 id="mapper">Mapper</h2>
<p>All mapper classes implement these methods per the MapperInterface: find(), createEntity(),
updateEntity(), deleteEntity(), batchSave(), batchCreate(), batchUpdate(), update(), and
delete(). These are not specific to the database mapper implementation. The data source for
these mappers could be anything. The primary job of the mapper is to interpret the criteria
passed to it in domain logic terms and interact with the persistence layer accordingly.</p>
<h2 id="criteria">Criteria</h2>
<p>The Criteria class is used for querying data in terms of entities. No knowledge is required of
the underlying persistence mechanism or data structure; only entity data and relationships.
Criteria can be used for common simple use cases with very minimal code or can be used for
complex queries.</p>
<p>The Criteria class cannot handle every possible scenario. In instances where use of the
Criteria class becomes too cumbersome, create a specific method on the Mapper class instead.
Never directly access or write to the persistence layer from any class other than a Mapper.
This will break down the barriers between the domain and persistence layers and cause issues in
the future.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../composite-view/README.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../domain-modeling-and-data-persistence/querying-data.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        

    
    <script src="../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
